import"./chunk-CEWEATGG.js";import{a as k}from"./chunk-2GI77OH2.js";import{A as G,B as Z,C as $,D as H,E as X,G as J,H as K,b as P,d as s,f as O,g as L,h as T,i as C,k as V,m as N,s as R,t as B,u as j,v as q,w as z,z as U}from"./chunk-JHES2NUZ.js";import"./chunk-47ZLAGLS.js";import{c as A,h as Q}from"./chunk-7KHX2HEI.js";import"./chunk-OYQZ6KVP.js";import"./chunk-AESYL7IM.js";import{Ac as I,Cb as g,Mb as E,Nb as u,Ob as F,Va as o,Vb as w,Wa as p,d as b,ia as M,lb as D,mb as S,nb as l,ra as c,sa as d,wb as n,xb as i,xc as x,yb as f,zb as y}from"./chunk-GJ2LZIUE.js";function te(r,t){r&1&&(n(0,"mat-error")(1,"strong"),u(2,"\u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4"),i()())}function re(r,t){r&1&&(n(0,"mat-error"),u(1," \u05DB\u05EA\u05D5\u05D1\u05EA \u05D0\u05D9\u05DE\u05D9\u05D9\u05DC \u05D0\u05D9\u05E0\u05D4 \u05EA\u05E7\u05D9\u05E0\u05D4 "),i())}function ie(r,t){r&1&&(n(0,"mat-error")(1,"strong"),u(2,"\u05E9\u05D3\u05D4 \u05D7\u05D5\u05D1\u05D4"),i()())}function oe(r,t){r&1&&(n(0,"mat-error"),u(1," \u05E1\u05E1\u05DE\u05D0 \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05DB\u05D9\u05DC \u05DC\u05E4\u05D7\u05D5\u05EA 4 \u05EA\u05D5\u05D5\u05D9\u05DD"),i())}function ne(r,t){r&1&&(n(0,"mat-error"),u(1," \u05E1\u05E1\u05DE\u05D4 \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05DB\u05D9\u05DC \u05DC\u05E4\u05D7\u05D5\u05EA \u05DE\u05E1\u05E4\u05E8 \u05D0\u05D7\u05D3 \u05D5\u05D0\u05D5\u05EA \u05D0\u05D7\u05EA"),i())}var h=class{isErrorState(t,_){let m=_&&_.submitted;return!!(t&&t.invalid&&(t.dirty||t.touched||m))}};var ye=(()=>{let t=class t{constructor(m,a,e){this.router=m,this.userService=a,this.authService=e,this.hide=!0,this.passwordRegex=/^(?=.*[a-zA-Z])(?=.*\d).{4,}$/,this.emailFormControl=new C("",[s.required,s.email]),this.passwordFormControl=new C("",[s.required,s.minLength(4),s.pattern(this.passwordRegex)]),this.matcher=new h}login(m,a){return b(this,null,function*(){try{let e=yield this.userService.signIn(m,a).toPromise();e?.user.email?(this.authService.login(e.user),this.router.navigateByUrl("allrecipes"),this.userService.token=e.token):this.router.navigate(["register"],{state:{details:{email:m,password:a}}})}catch(e){console.error("An error occurred while signing in:",e),this.router.navigate(["register"],{state:{details:{email:m,password:a}}})}})}};t.\u0275fac=function(a){return new(a||t)(p(A),p(k),p(Q))},t.\u0275cmp=M({type:t,selectors:[["app-login"]],standalone:!0,features:[w],decls:22,vars:14,consts:[["loginForm","ngForm"],["email",""],["pass",""],["type","text","matInput","","placeholder","Ex. pat@example.com",3,"formControl","errorStateMatcher"],[4,"ngIf"],["type","password","matInput","","placeholder","****",3,"type","formControl","errorStateMatcher"],["mat-icon-button","","matSuffix","",3,"click"],[1,"button",3,"click","disabled"]],template:function(a,e){if(a&1){let v=y();n(0,"form",null,0)(2,"mat-form-field")(3,"mat-label"),u(4,"\u05D0\u05D9\u05DE\u05D9\u05D9\u05DC "),i(),f(5,"input",3,1),D(7,te,3,0,"mat-error",4)(8,re,2,0,"mat-error",4),i(),n(9,"mat-form-field")(10,"mat-label"),u(11,"\u05E1\u05E1\u05DE\u05D0"),i(),f(12,"input",5,2),n(14,"button",6),g("click",function(){return c(v),d(e.hide=!e.hide)}),n(15,"mat-icon"),u(16),i()(),D(17,ie,3,0,"mat-error",4)(18,oe,2,0,"mat-error",4)(19,ne,2,0,"mat-error",4),i()(),n(20,"button",7),g("click",function(){c(v);let Y=E(6),ee=E(13);return d(e.login(Y.value,ee.value))}),u(21,"\u05D4\u05EA\u05D7\u05D1\u05E8"),i()}a&2&&(o(5),l("formControl",e.emailFormControl)("errorStateMatcher",e.matcher),o(2),l("ngIf",e.emailFormControl.hasError("required")),o(),l("ngIf",e.emailFormControl.hasError("email")),o(4),l("type",e.hide?"password":"text")("formControl",e.passwordFormControl)("errorStateMatcher",e.matcher),o(2),S("aria-label","Hide password")("aria-pressed",e.hide),o(2),F(e.hide?"visibility_off":"visibility"),o(),l("ngIf",e.passwordFormControl.hasError("required")),o(),l("ngIf",e.passwordFormControl.hasError("minlength")),o(),l("ngIf",e.passwordFormControl.hasError("pattern")),o(),l("disabled",e.emailFormControl.invalid||e.passwordFormControl.invalid))},dependencies:[X,H,K,J,I,x,R,V,P,O,L,T,B,N,G,U,j,q,z,$,Z],styles:[".button[_ngcontent-%COMP%]{background-color:#d9d6b5;border:none;color:#fff;padding:3vh 15vb;text-align:center;text-decoration:none;display:inline-block;font-size:5vb;margin:4px 2px;cursor:pointer;border-radius:10vb}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;margin-top:50px}mat-form-field[_ngcontent-%COMP%]{margin-bottom:6vb}.button[_ngcontent-%COMP%]{display:block;margin:8vb auto}.button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.example-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%] + mat-form-field[_ngcontent-%COMP%]{margin-left:8px}.example-right-align[_ngcontent-%COMP%]{text-align:right}input.example-right-align[_ngcontent-%COMP%]::-webkit-outer-spin-button, input.example-right-align[_ngcontent-%COMP%]::-webkit-inner-spin-button{display:none}"]});let r=t;return r})();export{ye as LoginComponent,h as MyErrorStateMatcher};
